@use "sass:color";
@use "viz-mixins";

/* Colours */
$bg-color: #0F1726;
$base-color: color.adjust(
    color.mix($bg-color, white, 89%),
    $saturation: 20%,
    $lightness: -4%
);
$text-color: #F7F9F9;
$primary-color: #1885df;
$secondary-color: #06589b;

:root {
    --imag-bg-color: #{$bg-color};
    --imag-text-color: #{$text-color};
    --imag-primary: #{$primary-color};
    --imag-secondary: #{$secondary-color};

    @include viz-mixins.generate-imag-colors(
        $bg-color: $bg-color,
        $text-color: $text-color,
        $base-color: $base-color,
        $is-light-theme: true,
        $flip-bg-color: white,
        $flip-bg-pct: 0%,
        $flip-text-color: black,
        $flip-text-pct: 15%,
        $suffix: "-light"
    );

    @include viz-mixins.generate-imag-colors(
        $bg-color: $bg-color,
        $text-color: $text-color,
        $base-color: $base-color,
        $is-light-theme: false,
        $suffix: "-dark"
    );
}

@mixin imag-theme($sel, $is-light, $flip-bg: null, $flip-bg-pct: 0%, $flip-text: null, $flip-text-pct: 0%) {
    #{$sel} {
        @include viz-mixins.generate-imag-colors(
            $bg-color: $bg-color,
            $text-color: $text-color,
            $base-color: $base-color,
            $is-light-theme: $is-light,
            $flip-bg-color: $flip-bg,
            $flip-bg-pct: $flip-bg-pct,
            $flip-text-color: $flip-text,
            $flip-text-pct: $flip-text-pct
        );
    }
}

/* Light theme: use a blue base so --imag-100 is the lightest blue and
   --imag-10 is the darkest (in 10% steps). */
$light-theme-sel: ':root[data-theme="light"], [data-theme="light"]';
@include imag-theme($light-theme-sel, true, white, 0%, black, 15%);

/* Dark theme: opposite mapping so --imag-100 is the darkest (base 100%) and
   --imag-10 is lightest. */
@include imag-theme(':root[data-theme="dark"], [data-theme="dark"]', false);

/* If user prefers dark and no explicit theme is set, generate dark palette */
@media (prefers-color-scheme: dark) {
    @include imag-theme(':root:not([data-theme])', false);
}

/* If user prefers light and no explicit theme is set, generate light palette */
@media (prefers-color-scheme: light) {
    @include imag-theme($light-theme-sel, true, white, 0%, black, 15%);
}

/* Up */
::-webkit-scrollbar-button:single-button:vertical:decrement {
    height: 12px;
    width: 16px;
    background-position: center 4px;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='var(--imag-20)'><polygon points='50,00 0,50 100,50'/></svg>");
}

::-webkit-scrollbar-button:single-button:vertical:decrement:hover {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='var(--imag-90)'><polygon points='50,00 0,50 100,50'/></svg>");
}

::-webkit-scrollbar-button:single-button:vertical:decrement:active {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='var(--imag-100)'><polygon points='50,00 0,50 100,50'/></svg>");
}

/* Down */
::-webkit-scrollbar-button:single-button:vertical:increment {
    height: 12px;
    width: 16px;
    background-position: center 2px;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='var(--imag-20)'><polygon points='0,0 100,0 50,50'/></svg>");
}

::-webkit-scrollbar-button:single-button:vertical:increment:hover {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='var(--imag-90)'><polygon points='0,0 100,0 50,50'/></svg>");
}

::-webkit-scrollbar-button:single-button:vertical:increment:active {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='var(--imag-100)'><polygon points='0,0 100,0 50,50'/></svg>");
}